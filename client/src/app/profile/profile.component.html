<div class="container">
<div class="card text-center">
    <div class="card-header text-white bgd">
        <h1>Your Details</h1>
    </div>
    <div class="card-body bg">
      <h5 class="card-title">{{details.name}}</h5>
      <table class="table">
        <tr>
            <th>Role:</th>
            <td>{{details.roles}}</td>
        </tr>
        <tr>
            <th>Email Address:</th>
            <td>{{details.email}}</td>
        </tr>
        </table>
        <button type="button" class="btn btn-warning"> <span data-toggle="modal" data-target="#editModal">
          Change Password
      </span>
      </button>
      <!--Modal to change paswd-->
      <div class="modal fade" id="editModal" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Change Password</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="ngOnInit()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form >
                      <div class="form-group">
                        <label for="password" class="text-white">New Password:</label>
                        <input type="password" class="form-control" name="password" placeholder="Password" [(ngModel)]="details.password">
                      </div>
                      <div class="form-group">
                        <label for="password" class="text-white">Confirm Password:</label>
                        <input type="password" class="form-control" name="password" placeholder="Password" [(ngModel)]="temp">
                      </div>
                        </form>
                <div class="modal-footer">
                    <button type="submit" (click)="changePswd(details._id,details.password)" class="btn-success btn-md login_btn" data-dismiss="modal">Submit</button>
                </div>
            </div>
        </div>
</div>
    <!--Modal end-->
    </div>
    </div>
  </div>
  <br> <br>
    <h2 *ngIf="details.roles=='admin'" class="text-center">Accounts</h2>
  <table *ngIf="details.roles=='admin'" class="table table-striped table-dark table-bordered table-hover">
    <thead>
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Role</th>
            <th>Email</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
      <tr *ngIf="account?.length==0">
          <td colspan="4" class="text-center">No Users!</td>
      </tr>
      <tr  *ngFor="let acc of account; let i = index;">
          <td>{{i+1}}</td>
          <td>{{acc.name}}</td>
          <td>{{acc.roles}}</td>
          <td>{{acc.email}}</td>
          <td>
              <button type="button" class="btn btn-danger" (click)="delAccount(acc._id)" data-toggle="tooltip" title="Deregister">Deregister</button>
          </td>
      </tr>
    </tbody>
  </table>
<br>
<div *ngIf="details.roles=='admin'" class="text-right">
  <button type="button" class="btn btn-warning" data-toggle="tooltip" title="Add New User"> <span data-toggle="modal" data-target="#registerModal">Register</span></button>
</div>

<!--Modal to Register User-->
<div class="modal fade" id="registerModal" tabindex="-1" role="dialog">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Register</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="ngOnInit()">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <form >
                <div class="form-group">
                  <label for="name">Name:</label>
                  <input type="name" class="form-control" name="name" placeholder="Enter Name" [(ngModel)]="detail.name">
                </div>
                <div class="form-group">
                  <label for="email" >Email:</label>
                  <input type="email" class="form-control" name="email" placeholder="Email" [(ngModel)]="detail.email">
                </div>
                <div class="form-group">
                  <label for="password" >Password:</label>
                  <input type="password" class="form-control" name="password" placeholder="Password" [(ngModel)]="detail.password">
                </div>
                <div class="form-group">
                  <label for="password" >Confirm Password:</label>
                  <input type="password" class="form-control" name="password" placeholder="Password" [(ngModel)]="temp">
                </div>
                <div class="form-group">
                  <label for="roles" >Role:</label>
                  <select id="roles" name="roles" class="form-control"[(ngModel)]="detail.roles">
                    <option value="" selected disabled >User Type</option>
                    <option value="admin">Admin
                    <option value="faculty">Faculty
                    <option value="club">Club
                  </select>
                </div>
              </form>
      
          <div class="modal-footer">
              <button type="submit" (click)="register()" class="btn-success btn-md login_btn" data-dismiss="modal">Submit</button>
          </div>
      </div>
  </div>
</div>
